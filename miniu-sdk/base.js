const miniu = require('miniu');
const semver = require('semver');

function initialConfig() {
  const privateKey = 'MIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQCTbwNQLlxwBADPpP7KY+CvglUPCkzqw2v51+k+zT4pRLidlRDfIEdDEfVRxzBeoXefvkX9+IV0qTf03MM+btVZ9JEwtdl12FobA+Ks7mEw45E4rWUDClPtr/iX9IDz7N15j1I+SKS27w5da5v0u4fXlfdgSTNjIfII7C3O3NBohkzmVTYUNtBvV14k9/XlvyUYP05pSKPdMdXWz2jjFZIUC1IQQR1s6AO/GFl9NWxquWAB0LC+EorLRB7OhCUiQo6jub4GckFkZL8K5EXJjnALWTQjZPjjDgfer6ULm1mTJIGe3Voj3asQB4TUMR2wr58em+o6pXQfOk00S0WjmAXlAgMBAAECggEAfAGMxN0pzOHhGMXLtMnLS3QRPSRJy9BxOmUbf0I8fZOawJiH51SL++LX91/V1FJ1fnwY/OQSxCwsr50b76BjfVUS5eierts59q0O9KtQPkG6fPSDGMqQC0TOkGkMKZ7aLguZfl+1g1SRPYxsUa2GNZOizW7kdQYxQMX+RZc/CBpe3DAvOz4zXp0//cfnfhS6lN9ubFgz1DQrpOLQceiIaLz7JRTro7qSYDuT6mlK1TOEBxu0Bfr5Kc2UN76OibgRt625OgmObf6M6NLiJ84x9DsNqvwKe7FH6GzNbIIKjMEKVMeEitOYIovtlhDS/flaSAZoU/q72Wc9ly65I7TApQKBgQDLdoeUXAahYcp9jPEUhW2LmLXAesBxBwaIlM8HscYtvdFxc5vTubfh+D8Xz/tcdUnGgymx2CZ8bINkCuWu85hV/L1i9N0NaZWSxiZ9Eax6ZDejVSt0sBY3cvSKwM2WBB6VaF2EpPTMe3uiovtN7cEjkhk3ntAbqzjyYBzLiaNJewKBgQC5gMlnUTO0tBKzWt5RKBYTtNoqlu+FYngd7J3R3HiBVWzsAPRdg3kSl1zCh2df0BFBz2M8ntffOBF1eMZW+OWMZG2i8owClPaDmHZq17sNS1baa4KAeJgn1aWcOGy28jN449RRq2/tKrqcy2m4FPIhuXQZdgxXqurbx/+bSoxgHwKBgEzj82LW0E6mxT5jSCxILFjoEi+2dAmC7S4qhn7S6SEaLg+g8A+4jMxh434dRFHxpTrXEKe8FvdIjvL8x0Yxmq1MQUonXW6XK0Z3ic4UIslyHDCmnDCR5yN3VwEk0czSq7gs48KgED9CnzucOjp+ElJeAReq9dyu/WtjdR5aWpIHAoGBAIvrqX7l0AN4ZDamztQWUXixzHGdgbNxj7q6lFwMWVTss4jcO3YhyfwM8anFamLp1Wp3XJoIEjpL11dtLuXBPZwE0HG9U4BLDho6sO9sI6ombq+3sirnS5WYYB+Sq+XekJaZ+rdTgcw5k6LbB7YTDoQDl5/w2+RwhlAa7iEbPQDvAoGAZY32eAvVAx9QECuNWNKrxNy1bxyNYYi+irrPvsuNOp+CF9M5tXN2RhfRUj2oBebcxWDPRS61pc5ZNVnoDJDL6d+Gq4uW/xmhey/jf3WjF9sPWln/mKj6UoMDZG9qHGW5ecTSOFgsdlAKXk3AiAOgEQkJRwtvCpZBcM1B3zR/uGE=';
  const toolId = '0e2e645bd8144cc595be5484ed30fcfc';

  miniu.setConfig({
    privateKey,
    toolId,
  });
}

module.exports = async function getFirstTinyApp() {
  initialConfig();
  const miniList = await miniu.miniAppList();
  return miniList.length ? miniList[0] : null;
}
